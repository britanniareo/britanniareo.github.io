!function(e,t,r){"use-strict";t.module("Britannia",["ui.router","ngMaterial"]).config(["$mdThemingProvider",function(e){e.definePalette("britannia-blue",{50:"#e2edf9",100:"#a3c5ec",200:"#74a7e2",300:"#3982d6",400:"#2973c7",500:"#2464ae",600:"#1f5595",700:"#1a477b",800:"#143862",900:"#0f2a49",A100:"#e2edf9",A200:"#a3c5ec",A400:"#2973c7",A700:"#1a477b",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","A100","A200"]}),e.theme("default").primaryPalette("britannia-blue").accentPalette("red")}]).config(["$stateProvider","$urlRouterProvider",function(e,t){t.when("","/"),e.state("home",{url:"/",controller:"HomeCtrl",templateUrl:"/html/home.html",resolve:{services:["ServicesService",function(e){return e.getFeatured()}],areas:["ServiceAreasService",function(e){return e.getSummary()}]}}),e.state("services",{url:"/services",controller:"ServicesCtrl",templateUrl:"/html/services.html",resolve:{services:["ServicesService",function(e){return e.getAll()}]}}),e.state("service-areas",{url:"/service-areas",controller:"ServiceAreasCtrl",templateUrl:"/html/service-areas.html",resolve:{areas:["ServiceAreasService",function(e){return e.getAll()}]}}),e.state("error",{url:"/error",templateUrl:"/html/not-found.html"}),e.state("not-found",{url:"*path",templateUrl:"/html/not-found.html"})}]).run(["$rootScope","$location","$window","$state",function(e,t,r,n){e.$on("$stateChangeSuccess",function(e){document.body.scrollTop=document.documentElement.scrollTop=0,!r.ga||t.host().indexOf("www.britanniareo.com")<0||r.ga("send","pageview",{page:t.path()})}),e.$on("$stateChangeError",function(e,t,r,i,o,c){e.preventDefault(),n.go("error")})}]).controller("aniDistances",["$scope",function(t){t.getScrollOffsets=function(t){if(null!==(t=t||e).pageXOffset)return{x:t.pageXOffset,y:t.pageYOffset};var r=t.document;return"CSS1Compat"===document.compatMode?{x:r.documentElement.scrollLeft,y:r.documentElement.scrollTop}:{x:r.body.scrollLeft,y:r.body.scrollTop}},t.getPosition=function(e){return{x:e[0].offsetLeft,y:e[0].offsetTop}},t.getViewPortSize=function(e){return{x:Math.max(document.documentElement.clientWidth,e.innerWidth||0),y:Math.max(document.documentElement.clientHeight,e.innerHeight||0)}}}]).directive("aniView",["$window",function(e){return{restrict:"A",controller:"aniDistances",transclude:!0,replace:!0,template:'<div ng-transclude ng-class="{ active: inView }"></div>',scope:{inView:"@"},link:function(r,n,i){t.element(e).bind("scroll",function(){if(!r.inView){var t=r.getPosition(n),i=r.getScrollOffsets(e),o=r.getViewPortSize(e),c={x:parseInt(o.x+i.x),y:parseInt(o.y+i.y)};c.y>=t.y+n[0].offsetHeight&&c.x>=t.x?r.inView=!0:r.inView=!1,r.$apply()}})}}}]).factory("ServicesService",["$http",function(e){var t={};return t.getAll=function(){return e.get("/api/services/v1").then(function(e){return e.data})},t.getFeatured=function(){return e.get("/api/services/v1").then(function(e){return e.data.filter(function(e){return e.featured})})},t}]).factory("ServiceAreasService",["$http",function(e){var r={};return r.getAll=function(){return e.get("/api/service-areas/v1").then(function(e){return e.data})},r.getSummary=function(){return e.get("/api/service-areas/v1").then(function(e){var r=0,n=0;return t.forEach(e.data.states,function(e,i){r++,t.forEach(e.counties,function(e,t){n++})}),{states:r,counties:n}})},r}]).controller("NavCtrl",["$scope",function(e){e.menuOpen=!1,e.menuStyle="",e.closeMenu=function(){e.menuOpen=!1,e.menuStyle=""},e.toggleMenu=function(){e.menuOpen=!e.menuOpen,e.menuOpen?e.menuStyle="height:"+document.getElementById("menu-wrapper").offsetHeight+"px;":e.menuStyle=""}}]).controller("HomeCtrl",["$scope","ServicesService","ServicesService","services","areas",function(e,t,r,n,i){e.services=n,e.areas=i}]).controller("ServicesCtrl",["$scope","ServicesService","services",function(e,t,r){e.serviceFilter="",e.services=r,e.clearFilters=function(){e.serviceFilter=""},e.showService=function(t){var r=e.serviceFilter.toLowerCase(),n=!r||""===r||t.name.toLowerCase().indexOf(r)>=0||t.description.toLowerCase().indexOf(r)>=0;return t.showing=n,n},e.servicesShowing=function(){return e.services.filter(function(e){return e.showing}).length}}]).controller("ServiceAreasCtrl",["$scope","ServiceAreasService","areas",function(e,t,r){var n=function(t){var r=e.countyFilter.toLowerCase();return!r||""===r||t.name.toLowerCase().indexOf(r)>=0};e.countyFilter="",e.stateFilter="",e.states=r.states,e.clearFilters=function(){e.countyFilter="",e.stateFilter=""},e.showCounty=function(e){return n(e)},e.showState=function(t){var r=!0;return""!==e.stateFilter&&t.abbr!==e.stateFilter&&(r=!1),0===t.counties.filter(n).length&&(r=!1),t.showing=r,r},e.statesShowing=function(){return e.states.filter(function(e){return e.showing}).length}}])}(window,window.angular);